# vi コマンド
{:.no_toc}

* toc
{:toc}

## 入力モードへの移行
```vi
# カーソル位置で入力モードに移行
i - insert

# 行の先頭で入力モードに移行
I (shift + i)

# カーソル位置の1文字後で入力モードに移行
a -append

# 行の末尾で入力モードに移行
A (shift + a)

# カーソルの下の行に空行を挿入して入力モードに移行
o - open

# カーソルの上の行に空行を挿入して入力モードに移行
O (shift + o)
```

## 単語単位でのジャンプ
```vi
# 1語先にジャンプ
# foo. barでfにカーソルがある時には次の.に移る。
w

# 記号や句読点を無視して1語先にジャンプ
# foo. barでfにカーソルがある時には次のbに移る。
W (shift + w)

# 単語の末尾にジャンプ
e

# 句読点を含む単語の末尾にジャンプ
E (shift + e)

# 1語前にジャンプ
# foo. barでbにカーソルがある時には前の.に移る。
b

# 記号や句読点を無視して1語前にジャンプ
# foo. barでbにカーソルがある時には前のfに移る。
B (shift + b)
```

## 行単位でのジャンプ
```vi
# 行の先頭にジャンプ
0

# カレント行の空白を除く1文字目に移動
^

# カレント行のn文字目に移動
n|

# 行の末尾にジャンプ
$ (shift + 4)
```

## 行の移動
```vi
# カーソルを1つ下に移動
j

# 次の行の1文字目にジャンプ
Enter
+

# カーソルを1つ上に移動
k

# 前の行の1文字目にジャンプ
-
```

## 画面単位でのジャンプ
```vi
# 1画面順方向にスクロール
ctrl + f - forward

# 半画面順方向にスクロール
ctrl + d

# 1画面逆方向にスクロール
ctrl + b - backward

# 半画面逆方向にスクロール
ctrl + u

# カーソル位置が画面の一番上に表示されるようにスクロール
# スクロールのオフセットは適用される。
zEnter

# カーソル位置が画面の中央に表示されるようにスクロール
z.

# カーソル位置が画面の一番下に表示されるようにスクロール
z-

# 画面の一番上の行にカーソルを移動
# 2Hとすると上から2行目にカーソルを移動させられる。
H (shift + h) - high

# 画面の中央の行にカーソルを移動
M (shift + m) - middle

# 画面の一番下の行にカーソルを移動
# 2Lとすると下から2行目にカーソルを移動させられる。
L (shift + l) - low

# ファイルの先頭にジャンプ
gg

# ファイルの末尾にジャンプ
G (shift + g)
```

## テキストブロック単位のジャンプ
```vi
# 現在の文の先頭にジャンプ
(

# 現在の文の末尾にジャンプ
)

# 現在の段落の先頭にジャンプ（空白行を飛び回る）
{

# 現在の段落の末尾にジャンプ（空白行を飛び回る）
}

# 現在のセクションの先頭にジャンプ
[[

# 現在のセクションの末尾にジャンプ
]]
```

## 文字単位の編集
```vi
# 文字を削除
# 数字と組み合わせられる。fooならば3xで削除できる。
x

# 文字を削除して入力モードに移行
# 数字と組み合わせられる。fooならば3sで削除しつつ入力モードに移行できる。
s - substitute

# 文字を置換
# 数字と組み合わせられる。fooならば3raでaaaに置換できる。
r - replace

# 上書きモードに移行
R

# 大文字・小文字の変換
# 数字と組み合わせられる。fooのfにカーソルがある時に2~とするとFOoとなる。
~

# 文字の入れ替え
# 1文字削除してカーソルの右に貼り付ける。12の1にカーソルがある時にxpとすると21となる。
xp
```

## 単語単位の編集
```vi
# 単語を削除
# foo barのfにカーソルがある時にはスペースも同時に削除される。
# dwとvwでは選択範囲が異なるため、ビジュアルモードではveを使用する。
dw

# 単語を削除して入力モードに移行
cw
```

## 行単位の編集
```vi
# 行を削除
dd

# カーソル位置から行の末尾までを削除
D

# カーソル位置から行の末尾までを削除して入力モードに移行
C

# 行を削除して入力モードに移行
cc
S

# カーソルの下の行をカーソル行の末尾に連結
J (shift + j)
```

## テキストのコピー&ペースト
```vi
# 文字のコピー
yl

# 単語のコピー
yw

# 行のコピー
yy
Y (shift + y)

# ペースト
p

# 逆方向にペースト
# 文字・単語ではカーソルの右に、、行ではカーソルの上にペーストされる。
P (shift + p)
```

## 数字の操作
```vi
# インクリメント
ctrl + a

# デクリメント
ctrl + x

# 階段状に数値をインクリメント
# 0を行選択／矩形選択した状態で実施すると、階段状に数値をインクリメントできる。
# 0 -> 1
# 0 -> 2
# 0 -> 3
# 0 -> 4
# 0 -> 5
g -> ctrl + a
```

## 特殊な操作
```vi
# コマンドの繰り返し
.

# コマンドの取り消し
u

# 画面のリフレッシュ
ctrl + l
```
